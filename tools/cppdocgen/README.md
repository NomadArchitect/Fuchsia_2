This is an experimental tool to generate markdown documentation from C++. It
consumes .yaml output from clang-doc and formats markdown for serving on
fuchsia.dev.

It is not yet ready for general use. It has many limitations and bugs and is not
yet hooked up to the build.

Instructions for running manually. It is currently very involved and will be
streamlined over time.

  * Create a .cc file in the target you want to document and include all of the
    headers you want to generate documentation for. It can be otherwise empty.

  * To do a build.

  * Run clang-doc on that output, substituting the name of the .cc file from the
    first step:

```
clang-doc --format=yaml -p=out/x64 --executor=all-TUs --filter=<NAME-OF-CC-DOC-FILE>
          --output=<SOME-TEMP-DIR> out/<BUILD-DIR>/compile_commands.json
```

  * Run cppdocgen on that output, re-listing the headers you want to include
    documentation for (relative to the build dir) and providing input (the temp
    directory generated by clang-doc) and output (for the markdown files)
    directories:

```
out/<BUILD-DIR>/host_x64/cppdocgen --indir=<TEMP-DIR-FROM-ABOVE>
    --outdir=<OUT-DIR> --strip-include-elts=6
    --source-url="https://fuchsia.googlesource.com/fuchsia/+/refs/heads/main/"
    ../../sdk/lib/fdio/include/lib/fdio/directory.h
    ../../sdk/lib/fdio/include/lib/fdio/fd.h
```

## Controlling the output

### Per-header documentation

You can supply markdown text to be included at the top of the reference for a
header file. To count as the documentation for the header (rather than a
copyright block or the documentation for something else), the comment must
satisfy all of these requirements:

  * It must be deliniated with "///" comments at the beginning of the line.
  * It must be followed with a blank line.
  * It must appear before any non-preprocessor lines (only "#" and "//" lines
    are allowed before it).

It is recommended that this block go immediately before or after the include guard.

### Setting the title

A title will be generated for each reference page based on the header and
library name. This may not always be appropriate.

If the header file comment starts with a markdown heading 1 ("#"), that line
will be used as the title of the page instead. For example:

```
// Copyright 2022 blah blah

#ifndef MY_LIBRARY_MY_HEADER_H_
#define MY_LIBRARY_MY_HEADER_H_

/// # Deprecated functions in libdoom
///
/// The header `<lib/libdoom/deprecated.h>` contains all of the functions
/// that are currently deprecated but allowed to be used.
```

For user-friendliness:

  * Include the path and name of the header file as the user will type it in
    their code (likely relative to the library include directory, not the
    fuchsia repository root). If this is not included in the title, put it near
    the top of the header documentation text.

  * Include the name of the library.
