# Copyright 2018 The Fuchsia Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

import("//build/banjo/toolchain.gni")

config("banjo_gen_config") {
  banjo_root_gen_dir =
      get_label_info("//bogus($banjo_toolchain)", "root_gen_dir")
  include_dirs = [ banjo_root_gen_dir ]
}

# TODO(fxbug.dev/95833): Delete this config after all user code
# migrates off of the C bindings.
config("fidl-deprecated-c-bindings") {
  cflags = [ "-DFIDL_ALLOW_DEPRECATED_C_BINDINGS" ]

  # Please do not add to this list. Refer to fxbug.dev/95833 to see
  # how a target could be migrated off the C FIDL bindings.
  #
  # To regenerate this list, run
  #
  #   scripts/gn/trim_visibility.py --target="//build/c:fidl-deprecated-c-bindings"
  #
  # and replace the contents of `visibility` with the script output.
  visibility = [
    "//examples/drivers/dotmatrix_display:bin",
    "//src/camera/drivers/controller:source",
    "//src/camera/drivers/controller/test:controller_unittest_bin",
    "//src/camera/drivers/hw_accel/gdc:gdc_task_unittest_bin",
    "//src/camera/drivers/hw_accel/gdc:lib",
    "//src/camera/drivers/hw_accel/ge2d:ge2d_on_device_test",
    "//src/camera/drivers/hw_accel/ge2d:ge2d_task_unittest_bin",
    "//src/camera/drivers/hw_accel/ge2d:lib",
    "//src/camera/drivers/hw_accel/task:camera-task",
    "//src/camera/drivers/sensors/imx227:fuchsia_driver",
    "//src/camera/drivers/test_utils:fake_buffer_collection",
    "//src/camera/drivers/test_utils:fake_buffer_collection_unittest_bin",
    "//src/camera/lib/format_conversion",
    "//src/camera/lib/image_utils:hsv_color_source",
    "//src/camera/lib/image_utils:hsv_generator_unittest_bin",
    "//src/camera/lib/image_utils:image_format_rgba",
    "//src/camera/lib/image_utils:image_format_rgba_unittest_bin",
    "//src/camera/lib/stream_utils:stream_configs",
    "//src/connectivity/bluetooth/core/bt-host:_driver.shlib-used.fuchsia_driver",
    "//src/connectivity/bluetooth/core/bt-host:device_tests",
    "//src/connectivity/bluetooth/core/bt-host:sources",
    "//src/connectivity/bluetooth/core/bt-host:stack",
    "//src/connectivity/bluetooth/core/bt-host/fidl",
    "//src/connectivity/bluetooth/core/bt-host/fidl:adapter_test_fixture",
    "//src/connectivity/bluetooth/core/bt-host/fidl:helpers",
    "//src/connectivity/bluetooth/core/bt-host/fidl:tests",
    "//src/connectivity/bluetooth/core/bt-host/gap",
    "//src/connectivity/bluetooth/core/bt-host/gap:testing",
    "//src/connectivity/bluetooth/core/bt-host/gap:tests",
    "//src/connectivity/bluetooth/core/bt-host/hci",
    "//src/connectivity/bluetooth/core/bt-host/hci:testing",
    "//src/connectivity/bluetooth/core/bt-host/hci:tests",
    "//src/connectivity/bluetooth/core/bt-host/l2cap",
    "//src/connectivity/bluetooth/core/bt-host/l2cap:testing",
    "//src/connectivity/bluetooth/core/bt-host/l2cap:tests",
    "//src/connectivity/bluetooth/core/bt-host/sco",
    "//src/connectivity/bluetooth/core/bt-host/sco:tests",
    "//src/connectivity/bluetooth/core/bt-host/transport",
    "//src/connectivity/bluetooth/core/bt-host/transport:testing",
    "//src/connectivity/bluetooth/core/bt-host/transport:tests",
    "//src/connectivity/bluetooth/hci/emulator:_driver.shlib-used.fuchsia_driver",
    "//src/connectivity/bluetooth/hci/emulator:fuchsia_driver",
    "//src/connectivity/bluetooth/hci/passthrough:fuchsia_driver",
    "//src/connectivity/bluetooth/hci/transport/uart:common",
    "//src/connectivity/bluetooth/hci/transport/uart:tests_executable",
    "//src/connectivity/bluetooth/hci/vendor/atheros:_driver.shlib-used.fuchsia_driver",
    "//src/connectivity/bluetooth/hci/vendor/atheros:fuchsia_driver",
    "//src/connectivity/bluetooth/hci/vendor/broadcom:bt-hci-broadcom-driver",
    "//src/connectivity/bluetooth/hci/vendor/broadcom:bt-hci-broadcom-test-bin",
    "//src/connectivity/bluetooth/hci/vendor/broadcom:common",
    "//src/connectivity/bluetooth/hci/vendor/broadcom:tests_executable",
    "//src/connectivity/bluetooth/tools/bt-hci-tool:bin",
    "//src/connectivity/bluetooth/tools/bt-intel-tool:bin",
    "//src/connectivity/ethernet/drivers/ethernet:ethernet-integration",
    "//src/connectivity/ethernet/drivers/ethertap:ethertap-driver",
    "//src/connectivity/ethernet/drivers/ethertap:ethertap-unittest",
    "//src/developer/forensics/feedback/tests:kernel_log_integration_test_exe",
    "//src/developer/memory/metrics",
    "//src/developer/memory/monitor:lib",
    "//src/devices/block/bin/biotime",
    "//src/devices/block/bin/blktest",
    "//src/devices/block/bin/disk-inspect",
    "//src/devices/block/bin/gpt",
    "//src/devices/block/bin/iochk",
    "//src/devices/block/bin/iotime",
    "//src/devices/block/bin/lsblk",
    "//src/devices/block/drivers/block-verity:block-verity-test",
    "//src/devices/block/drivers/core:core-unittest-bin",
    "//src/devices/block/drivers/core:shared",
    "//src/devices/block/drivers/ftl/tests:ftl-integration",
    "//src/devices/block/drivers/ramdisk/test:ramdisk",
    "//src/devices/block/drivers/ums-function:ums-function-driver",
    "//src/devices/board/drivers/astro:astro-driver",
    "//src/devices/board/drivers/av400:av400-driver",
    "//src/devices/board/drivers/nelson:nelson-driver",
    "//src/devices/board/drivers/nelson:nelson-module-driver",
    "//src/devices/board/drivers/sherlock:luis-driver",
    "//src/devices/board/drivers/sherlock:luis-factory-driver",
    "//src/devices/board/drivers/sherlock:luis-factory-rndis-driver",
    "//src/devices/board/drivers/sherlock:sherlock-dai-test-driver",
    "//src/devices/board/drivers/sherlock:sherlock-driver",
    "//src/devices/board/drivers/sherlock:sherlock-factory-driver",
    "//src/devices/board/drivers/sherlock:sherlock-factory-rndis-driver",
    "//src/devices/board/drivers/sherlock:sherlock_driver",
    "//src/devices/board/drivers/vim3:vim3-driver",
    "//src/devices/bus/drivers/pci/test:pci-driver",
    "//src/devices/bus/drivers/pci/test:pci_protocol_test_driver-driver",
    "//src/devices/clock/bin/clock",
    "//src/devices/i2c/drivers/intel-i2c:intel-i2c-driver",
    "//src/devices/lib/sysmem",
    "//src/devices/nand/bin/nand-loader",
    "//src/devices/nand/bin/nand-util",
    "//src/devices/nand/bin/nand-util:common",
    "//src/devices/nand/bin/nand-util:nand-util-test-bin",
    "//src/devices/nand/drivers/broker/test:common",
    "//src/devices/nand/drivers/broker/test:nand-broker",
    "//src/devices/nand/drivers/broker/test:nandpart-broker",
    "//src/devices/nand/drivers/ram-nand:test",
    "//src/devices/power/bin/lspwr",
    "//src/devices/rtc/drivers/intel-rtc:intel-rtc-driver",
    "//src/devices/rtc/drivers/intel-rtc:intel-rtc-test-bin",
    "//src/devices/rtc/drivers/nxp:nxp-driver",
    "//src/devices/rtc/lib/rtc",
    "//src/devices/rtc/lib/rtc/tests:rtc-lib-test-bin",
    "//src/devices/serial/drivers/aml-uart:aml-uart-test-bin",
    "//src/devices/serial/drivers/ftdi:ftdi-driver",
    "//src/devices/serial/drivers/uart16550:uart16550_lib",
    "//src/devices/serial/drivers/uart16550:uart16550_lib_for_testing",
    "//src/devices/serial/drivers/usb-cdc-acm:usb-cdc-acm-driver",
    "//src/devices/serial/drivers/virtio-console:virtio_console-driver",
    "//src/devices/sysmem/drivers/sysmem:sysmem-driver",
    "//src/devices/sysmem/drivers/sysmem:sysmem-unittest-bin",
    "//src/devices/sysmem/drivers/sysmem:sysmem_common_srcs",
    "//src/devices/sysmem/tests/sysmem/fuzz:sysmem_fuzzer_executable",
    "//src/devices/sysmem/tests/sysmem/fuzz:sysmem_fuzzer_multi_executable",
    "//src/devices/sysmem/tests/sysmem/fuzz:sysmem_fuzzer_multi_test_executable",
    "//src/devices/sysmem/tests/sysmem/fuzz:sysmem_fuzzer_test_executable",
    "//src/devices/tests/ddk-fidl-test",
    "//src/devices/tests/ddk-power:ddk-power-test-child-driver",
    "//src/devices/tests/isolateddevmgr:isolateddevmgr",
    "//src/devices/tests/sysdev:sysdev-driver",
    "//src/devices/thermal/bin/thermal-cli",
    "//src/devices/thermal/bin/thermal-cli:common",
    "//src/devices/thermal/bin/thermal-cli:thermal-cli-test-bin",
    "//src/devices/thermal/drivers/aml-thermal-s905d2g:aml-thermal-s905d2g-driver",
    "//src/devices/thermal/drivers/aml-thermal-s905d2g:aml-thermal-s905d2g-test-bin",
    "//src/devices/thermal/drivers/aml-thermal-s905d2g-legacy:aml-thermal-s905d2g-legacy-driver",
    "//src/devices/thermal/drivers/aml-thermal-s905d2g-legacy:aml-thermal-s905d2g-legacy-test-bin",
    "//src/devices/usb/bin/usb-fwloader",
    "//src/devices/usb/bin/usbctl",
    "//src/devices/usb/bin/xdc-test",
    "//src/devices/usb/drivers/usb-peripheral:usb-peripheral-driver",
    "//src/devices/usb/drivers/usb-peripheral:usb-peripheral-unittest-bin",
    "//src/devices/usb/tests/usb",
    "//src/graphics/display/drivers/amlogic-display:common_srcs",
    "//src/graphics/display/drivers/display:shared",
    "//src/graphics/display/drivers/display/tests:base",
    "//src/graphics/display/drivers/dsi-dw:common_srcs",
    "//src/graphics/display/drivers/fake:fake-lib",
    "//src/graphics/display/drivers/fake:sysmem-proxy-device",
    "//src/graphics/display/drivers/goldfish-display:goldfish-display-driver",
    "//src/graphics/display/drivers/goldfish-display:goldfish-unittests",
    "//src/graphics/display/drivers/intel-i915:common_srcs",
    "//src/graphics/display/drivers/intel-i915-tgl:common_srcs",
    "//src/graphics/display/testing",
    "//src/graphics/drivers/virtio:gpu_lib",
    "//src/graphics/lib/magma/src/magma_util/platform/zircon:sysmem_connection",
    "//src/lib/fidl/c/llcpp_interop_tests:bin",
    "//src/lib/fidl/c/simple_tests:bin",
    "//src/lib/fostr:fostr-test-bin",
    "//src/lib/storage/block_client/cpp",
    "//src/lib/storage/block_client/cpp:block_client_unit_test",
    "//src/lib/storage/block_client/cpp:fake_device",
    "//src/lib/storage/fs_management/c:fvm",
    "//src/lib/storage/fs_management/cpp:fs-management",
    "//src/lib/storage/fs_management/cpp:fs-management-test",
    "//src/lib/storage/fs_management/cpp:fs-management-unittest",
    "//src/lib/storage/ramdevice_client/cpp:ramdevice-client",
    "//src/lib/storage/ramdevice_client/cpp:ramdevice-client-static",
    "//src/lib/storage/ramdevice_client/cpp:ramdevice-client-test-lib",
    "//src/lib/storage/vfs/cpp/inspect",
    "//src/lib/storage/vfs/cpp/inspect:inspect_unittests",
    "//src/lib/storage/vfs/cpp/journal:journal-unit",
    "//src/lib/storage/vfs/cpp/transaction",
    "//src/lib/storage/vfs/cpp/transaction:fs-transaction-test",
    "//src/lib/vulkan/swapchain:display",
    "//src/media/audio/bin/ihda",
    "//src/media/audio/drivers/intel-hda/controller:controller_test",
    "//src/media/audio/drivers/intel-hda/controller:src",
    "//src/media/audio/drivers/intel-hda/test:test_libs",
    "//src/performance/ktrace_provider:bin",
    "//src/power/thermd:bin",
    "//src/recovery/factory_reset:factory_reset_unittests",
    "//src/storage/bin/blobfs",
    "//src/storage/bin/dd",
    "//src/storage/bin/factoryfs",
    "//src/storage/bin/minfs",
    "//src/storage/bin/storage-metrics",
    "//src/storage/blobfs",
    "//src/storage/blobfs/test:blobfs_unittest",
    "//src/storage/blobfs/test:test_utils",
    "//src/storage/blobfs/test/integration:blobfs-fragmentation-bin",
    "//src/storage/blobfs/test/integration:blobfs-max-reservation-bin",
    "//src/storage/blobfs/test/integration:blobfs-no-space-bin",
    "//src/storage/blobfs/test/integration:blobfs-use-second-bitmap-bin",
    "//src/storage/blobfs/test/integration:blobfs_component_runner_test",
    "//src/storage/blobfs/test/integration:blobfs_integration",
    "//src/storage/blobfs/test/integration:blobfs_integration_fixtures",
    "//src/storage/blobfs/test/integration:blobfs_mount",
    "//src/storage/blobfs/test/integration:blobfs_superblock",
    "//src/storage/blobfs/test/integration:blobfs_sync",
    "//src/storage/blobfs/test/integration:blobfs_verifier_service",
    "//src/storage/blobfs/test/integration:executable_mount",
    "//src/storage/blobfs/test/integration:external_decompressor_integration",
    "//src/storage/conformance/conformance_harness/minfs:bin",
    "//src/storage/extractor/cpp:disk_extractor",
    "//src/storage/extractor/cpp:disk_extractor_unit_test",
    "//src/storage/extractor/cpp:fvm_extractor_unit_test",
    "//src/storage/factory/factoryfs",
    "//src/storage/factory/factoryfs:factoryfs_unit",
    "//src/storage/fshost",
    "//src/storage/fshost:block-watcher",
    "//src/storage/fshost:fshost-fxfs-integration-test-bin",
    "//src/storage/fshost:fshost-integration-test-bin",
    "//src/storage/fshost:fshost-registry",
    "//src/storage/fshost:fshost_test",
    "//src/storage/fuchsia-fatfs:fat_filename_tests",
    "//src/storage/fvm",
    "//src/storage/fvm:fvm-integration",
    "//src/storage/fvm:fvm_unit",
    "//src/storage/fvm:fvm_unit_executable",
    "//src/storage/fvm:test_support",
    "//src/storage/fvm/driver/test:fvm-driver-integration",
    "//src/storage/fxfs:fxfs-interop-fs",
    "//src/storage/lib/disk_inspector",
    "//src/storage/lib/disk_inspector:disk_inspector_unit",
    "//src/storage/lib/paver:paver-core",
    "//src/storage/lib/paver/test",
    "//src/storage/minfs",
    "//src/storage/minfs/allocator/test:minfs-allocator-unit",
    "//src/storage/testing:storage_driver_test_support",
    "//src/storage/tools/blobfs-compression/test:cli-option-validation-test",
    "//src/storage/tools/blobfs-corrupt",
    "//src/storage/tools/blobfs-corrupt:blobfs-corrupt-test",
    "//src/storage/tools/blobfs-corrupt:common",
    "//src/storage/volume_image/adapter:adapter-integration-test",
    "//src/storage/volume_image/adapter:adapter-tests",
    "//src/storage/volume_image/adapter:minfs-partition",
    "//src/storage/volume_image/fvm:fvm_sparse_image_reader_test",
    "//src/sys/bin/psutils:kstats",
    "//src/sys/bin/psutils:memgraph",
    "//src/sys/early_boot_instrumentation:coverage-source",
    "//src/ui/input/drivers/pc-ps2:pc-ps2-driver",
    "//src/ui/lib/display:hdcp_service",
    "//src/virtualization/bin/vmm/device:block",
    "//src/virtualization/bin/vmm/device/virtio_magma:magma_image",
    "//src/zircon/bin/hwstress:hwstress_v2_test",
    "//src/zircon/bin/hwstress:lib",
    "//src/zircon/bin/kstress",
    "//src/zircon/testing/mutex_pi_exerciser",
    "//vendor/*",
    "//zircon/kernel/lib/userabi/userboot/*",
    "//zircon/system/ulib/c/sanitizers",
    "//zircon/system/ulib/fidl-async-2/test:fidl-struct-test",
    "//zircon/system/ulib/hid",
    "//zircon/system/ulib/image-format",
    "//zircon/system/ulib/image-format:image-format-llcpp",
    "//zircon/system/ulib/image-format/test:image-format-test",
    "//zircon/system/ulib/kcounter",
    "//zircon/system/ulib/kernel-debug",
    "//zircon/system/ulib/profile",
    "//zircon/system/ulib/runtests-utils",
    "//zircon/system/ulib/storage-metrics",
    "//zircon/system/ulib/storage-metrics/test:storage-metrics",
    "//zircon/system/ulib/sysconfig-client/test:sysconfig-sync-client-test",
    "//zircon/system/ulib/sysmem-version",
    "//zircon/system/ulib/sysmem-version/test:sysmem-version-test",
    "//zircon/system/ulib/task-utils",
    "//zircon/system/ulib/zx/test:zx",
    "//zircon/system/utest/fidl-utils",
    "//zircon/system/utest/kernel-unittests",
    "//zircon/system/utest/runtests-utils",
    "//zircon/system/utest/svchost",
    "//zircon/third_party/uapp/dash",
  ]
}

# TODO(fxbug.dev/95833): Delete this config after all user code
# migrates off of the C bindings.
# This is used by generated C bindings library from fidlc, which unfortunately
# cannot have a definite visibility restriction. Please do not use this config.
config("fidl-deprecated-c-bindings-reserved-for-fidlc-generated-code-only") {
  cflags = [ "-DFIDL_ALLOW_DEPRECATED_C_BINDINGS" ]
}
