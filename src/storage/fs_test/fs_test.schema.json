{
    "$id": "https://fuchsia.dev/schema/src/storage/fs_test/fs_test.schema.json",
    "$schema": "https://json-schema.org/draft-2020-12/schema",
    "description": "Configuration for running a suite of filesystem tests",
    "properties": {
        "binary_path": {
            "description": "Path to the filesystem binary",
            "type": "string"
        },
        "has_directory_size_limit": {
            "default": false,
            "description": "True if the filesystem has a directory size limit (unrelated to available disk space)",
            "type": "boolean"
        },
        "max_file_size": {
            "description": "The maximum file size supported",
            "exclusiveMinimum": 0,
            "maximum": 9223372036854775807,
            "type": "integer"
        },
        "name": {
            "description": "Name of the filesystem",
            "minLength": 1,
            "type": "string"
        },
        "options": {
            "description": "A list of test options to be applied to the filesystem",
            "items": {
                "properties": {
                    "description": {
                        "description": "Name given to this set of options",
                        "type": "string"
                    },
                    "use_fvm": {
                        "description": "True if FVM should be used",
                        "type": "boolean"
                    }
                },
                "required": [
                    "description",
                    "use_fvm"
                ],
                "type": "object"
            },
            "minItems": 1,
            "type": "array"
        },
        "supports_fsck_after_every_transaction": {
            "default": false,
            "description": "True if the filesystem supports the fsck_after_every_transaction mount option",
            "type": "boolean"
        },
        "supports_hard_links": {
            "default": false,
            "description": "True if hard links are supported",
            "type": "boolean"
        },
        "supports_mmap": {
            "default": false,
            "description": "True if mmap is supported",
            "type": "boolean"
        },
        "supports_resize": {
            "default": false,
            "description": "True if the filesystem can expand in size when used within a volume manager like FVM",
            "type": "boolean"
        },
        "timestamp_granularity": {
            "description": "Timestamp granularity in nanoseconds",
            "exclusiveMinimum": 0,
            "type": "integer"
        },
        "use_directory_admin_to_unmount": {
            "default": false,
            "description": "True if the DirectoryAdmin protocol (legacy) should be used to unmount",
            "type": "boolean"
        }
    },
    "required": [
        "name",
        "binary_path",
        "timestamp_granularity"
    ],
    "type": "object"
}
